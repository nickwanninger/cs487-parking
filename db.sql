/* I know, deleting all the fields is bad but I don't care */
/* DROP TABLE users, lots, spots, vehicles, reservations; */



CREATE TABLE users (
    user_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email text,
    pass_hash text,
    acct_type integer /* 0 = Driver, 1 = Owner */
);

CREATE TABLE lots (
    lot_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    owner_id integer NOT NULL REFERENCES users,
    name text NOT NULL,
    address text NOT NULL,
    price integer NOT NULL,
		spaces_open integer NOT NULL DEFAULT 25 /* 25 slots by default */
);


CREATE TABLE vehicles (
    vehicle_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    driver_id integer REFERENCES users,
    license_plate text NOT NULL,
    name text NOT NULL
);


CREATE TABLE reservations (
  reservation_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	vehicle_id integer NOT NULL REFERENCES vehicles,
	lot_id integer NOT NULL REFERENCES lots,
	start_time timestamp NOT NULL DEFAULT current_timestamp,
	end_time timestamp NOT NULL DEFAULT current_timestamp
);
